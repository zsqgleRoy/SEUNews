import{d as w,r as l,o as q,D as x,E as e,c as _,b as a,t as Y,f as M,m as v,G as D,e as m,_ as N}from"./index-CUMlhCnO.js";const h={class:"payment-container"},C={class:"payment-card"},Q={class:"amount-container"},y={class:"amount"},k={class:"qrcode-container"},j=["src"],f={key:0,class:"loading-overlay"},E=w({__name:"QQPay",setup(I){const r=x(),o=v(),n=l(0),c=["src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYnNmvvwYgZEIgODc3NGUzNTE0ZDA0Y2UzZDVjOTc0NDc5NDRmYjU3MDU_3D_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkY69mvvwYg2ARCIDZjODNiYTFjYmJjOGE3ODFjZDI1ZTcwMTVmODI2M2Q4_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYq96vvwYg6AdCIDU1ODk2MGJjY2NjZjdhNTg2YmVhZmJiM2UyNDU3YmJi_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYjdqvvwYguBdCIDJlYWM4MzVmZWMyMjY4MTM2NWMwYzdiMWMwZTllN2Uw_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYn9qvvwYggDJCIDA3OTE4MDU2ZjYxOTE5YTMxMDA3MzViMGUwOTkzYzQw_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYsdqvvwYggGRCIDQzMzRlY2RkZmJhZDFkNWRiNTVhNjIwYWM3YmRjZjQ0_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYzdqvvwYgoIMBQiAwMTVjNGQ3MzQxYmU5OGI2NjFmM2VkN2YzY2FlNTcwNg_3D_3D_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkY99qvvwYgkJYCQiA3OTViYTg4ZTFiZTllMzMxNTUwMzE2NWE1MGFhNzhiZA_3D_3D_xxx_sign.png","src/assets/imges/https___i.qianbao.qq.com_wallet_sqrcode.htm_m=tenpay&f=wallet&a=1&u=2473228344&n=.&ac=CAEQuPCpmwkYjtuvvwYgoI0GQiAyMWRjNjI1ZjE0ZDNlOWQ3NjI3MDhkZDM0MjQwOGJiNQ_3D_3D_xxx_sign.png"],i=l(!1),p=()=>{o.go(-1)},g=()=>{i.value=!0},u=()=>{const t=sessionStorage.getItem("securityMessage");let s=parseInt(t||"0");return(isNaN(s)||s<0||s>=c.length)&&(s=0),c[s]},d=async()=>{try{(await D.post("/api/payment/complete",{amount:n.value})).data.success?(e.success("支付完成，感谢您的支持！"),o.push("/")):e.error("支付状态验证失败，请稍后重试！")}catch(t){e.error("请求出错，请稍后重试！"),console.error("支付完成请求出错:",t)}};return q(()=>{n.value=parseFloat(r.query.amount)||0,e.warning("请您核对支付金额和订单详情！")}),(t,s)=>(m(),_("div",h,[a("div",C,[a("div",{class:"back-button",onClick:p},s[0]||(s[0]=[a("span",{class:"arrow-icon"},null,-1),a("span",{class:"back-text"},"返回",-1)])),s[4]||(s[4]=a("h1",{class:"icon"},null,-1)),a("div",Q,[s[1]||(s[1]=a("span",{class:"currency"},"¥",-1)),a("span",y,Y(n.value.toFixed(2)),1)]),a("div",k,[a("img",{src:u(),alt:"支付二维码",class:"qrcode-image",onLoad:g},null,40,j),i.value?M("",!0):(m(),_("div",f,s[2]||(s[2]=[a("div",{class:"loading-spinner"},null,-1)])))]),s[5]||(s[5]=a("div",{class:"instruction-container"},[a("p",{class:"instruction-text"},"请使用手机QQ扫描二维码完成付款")],-1)),a("div",{class:"finish-button",onClick:d},s[3]||(s[3]=[a("span",{class:"back-text"},"我已完成支付",-1),a("span",{class:"next-icon"},null,-1)]))])]))}}),Z=N(E,[["__scopeId","data-v-e4c6f92a"]]);export{Z as default};
