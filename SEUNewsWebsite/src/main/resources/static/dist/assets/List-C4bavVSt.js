import{A as g,g as f}from"./news-DBmEFlcx.js";import{n as h}from"./newsCache-CZbv4D29.js";import{d as y,r as m,o as x,c as o,b as s,t as d,p as _,F as z,g as L,i as k,w as C,h as B,e as n,_ as H}from"./index-CUMlhCnO.js";const V={class:"news-list-container"},D={key:0,class:"loading-state"},M={key:1,class:"error-state"},N={class:"error-message"},b={key:2,class:"news-items"},S={class:"news-meta"},A={class:"news-date"},F={class:"news-headline"},I={class:"news-excerpt"},K=y({__name:"List",setup(E){const v=m([]),r=m(!0),c=m(""),u=async(i=1,e=10,l=g.PUBLISH)=>{r.value=!0,c.value="";const t=h.generateCacheKey({page:i,pageSize:e,status:l}),w=h.getCache(t);if(w){v.value=w,r.value=!1;return}try{const a=await f({page:i,pageSize:e,status:l});v.value=a==null?void 0:a.data.content,h.saveCacheData(t,a==null?void 0:a.data.content,72e5)}catch(a){c.value=a.message||"获取新闻列表失败"}finally{r.value=!1}};x(()=>{u()});const p=i=>new Date(i).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});return(i,e)=>{const l=B("router-link");return n(),o("div",V,[e[5]||(e[5]=s("div",{class:"news-list-header"},[s("svg",{class:"news-icon",viewBox:"0 0 24 24"},[s("path",{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"})]),s("h1",{class:"news-title"},"新闻动态")],-1)),r.value?(n(),o("div",D,e[0]||(e[0]=[s("svg",{class:"spinner",viewBox:"0 0 50 50"},[s("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"})],-1),s("div",{class:"loading-text"},"数据加载中...",-1)]))):c.value?(n(),o("div",M,[e[2]||(e[2]=s("svg",{class:"error-icon",viewBox:"0 0 24 24"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})],-1)),s("div",N,d(c.value),1),s("button",{onClick:u,class:"retry-button"},e[1]||(e[1]=[s("svg",{class:"refresh-icon",viewBox:"0 0 24 24"},[s("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})],-1),_(" 重新加载 ")]))])):(n(),o("ul",b,[(n(!0),o(z,null,L(v.value,t=>(n(),o("li",{key:t.id,class:"news-item"},[k(l,{to:`/news/${t.id}`,class:"news-link"},{default:C(()=>[s("div",S,[e[3]||(e[3]=s("svg",{class:"calendar-icon",viewBox:"0 0 24 24"},[s("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"})],-1)),s("time",A,d(p(t.publishDate)),1)]),s("h2",F,d(t.title),1),s("p",I,d(t.summary||"点击查看详细内容"),1),e[4]||(e[4]=s("div",{class:"news-footer"},[s("span",{class:"read-more"},[_(" 阅读全文 "),s("svg",{class:"arrow-icon",viewBox:"0 0 24 24"},[s("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})])])],-1))]),_:2},1032,["to"])]))),128))]))])}}}),$=H(K,[["__scopeId","data-v-9de3a559"]]);export{$ as default};
