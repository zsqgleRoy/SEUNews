import{d as f,r as i,o as y,D as x,E as a,c as l,b as e,t as h,f as v,m as w,G as k,e as _,_ as q}from"./index-CUMlhCnO.js";const C={class:"payment-container"},S={class:"payment-card"},b={class:"amount-container"},L={class:"amount"},E={class:"qrcode-container"},I=["src"],N={key:0,class:"loading-overlay"},Q=f({__name:"WeChatPay",setup(U){const d=x(),o=w(),n=i(0),r=["src/assets/imges/wxp___f2f1IheiyMwpz-bjJ4akchULPYJymXDhl7gpt7bBW3AXbP0QQjJRfIL2AOdq8c3nPbFD.png","src/assets/imges/wxp___f2f1g_CUK1_hFqZGMX46xJm7CUhDFx8Ew6_Xawy01y1VI2VO3ht42aYmuW4rN-huyq_5.png","src/assets/imges/wxp___f2f1SRtAQ1KVfSNUOazueme_tdwFs75GomzkfpBQG3E-qSXINrKhLWKTesOy3EdFcZdu.png","src/assets/imges/wxp___f2f14YhhLZR7n9ALiS69Wj8S_K_LSdeMdeJl1fEE22iko_qFlsWX1NyDloCVgKXONUNd.png","src/assets/imges/wxp___f2f1lkEh0ZnqJ_rlidjwJqQNsTBRjrCSluyRk09FdQq2m9oYA_ivm6x8Ybdu9vGOZnYH.png","src/assets/imges/wxp___f2f1bfEN-JEqHjLOXl8m68H8vngOzq_aGL3ARhhd7MDSGrQP4IafZDhvH6JJccEVvuu0.png","src/assets/imges/wxp___f2f1jufVsUJOuQrb_Iw3QDYX40YQQTmrpk4U3ey8sj9R9lWlJjregfbu-rDMQO4zfVts.png","src/assets/imges/wxp___f2f1bMW9PEUg4rfiGPSr1CrHqWiU9oNWLGFIuV_mYDvqXsUWSwn3eSmCcpLiK0B2o1aI.png","src/assets/imges/wxp___f2f112-Ct0GNMKSzS3RdXYuocEPUCFa24hiVUyd_9xkUTgdsRV3GLa8WVyzC11LuhSXG.png"],c=i(!1),u=()=>{o.go(-1)},p=async()=>{try{(await k.post("/api/payment/complete",{amount:n.value})).data.success?(a.success("支付完成，感谢您的支持！"),o.push("/")):a.error("支付状态验证失败，请稍后重试！")}catch(t){a.error("请求出错，请稍后重试！"),console.error("支付完成请求出错:",t)}},m=()=>{c.value=!0},g=()=>{const t=sessionStorage.getItem("securityMessage");let s=parseInt(t||"0");return(isNaN(s)||s<0||s>=r.length)&&(s=0),r[s]};return y(()=>{n.value=parseFloat(d.query.amount)||0,a.warning("请您核对支付金额和订单详情！")}),(t,s)=>(_(),l("div",C,[e("div",S,[e("div",{class:"back-button",onClick:u},s[0]||(s[0]=[e("span",{class:"arrow-icon"},null,-1),e("span",{class:"back-text"},"返回",-1)])),s[4]||(s[4]=e("h1",{class:"icon"},null,-1)),e("div",b,[s[1]||(s[1]=e("span",{class:"currency"},"¥",-1)),e("span",L,h(n.value.toFixed(2)),1)]),e("div",E,[e("img",{src:g(),alt:"支付二维码",class:"qrcode-image",onLoad:m},null,40,I),c.value?v("",!0):(_(),l("div",N,s[2]||(s[2]=[e("div",{class:"loading-spinner"},null,-1)])))]),s[5]||(s[5]=e("div",{class:"instruction-container"},[e("p",{class:"instruction-text"},"请使用手机微信扫描二维码完成支付")],-1)),e("div",{class:"finish-button",onClick:p},s[3]||(s[3]=[e("span",{class:"back-text"},"我已完成支付",-1),e("span",{class:"next-icon"},null,-1)]))])]))}}),W=q(Q,[["__scopeId","data-v-0ff0ce76"]]);export{W as default};
