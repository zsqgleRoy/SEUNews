import{d as L,r as _,o as K,a as x,c,b as t,t as h,e as r,_ as b,f as E,F as q,g as N,h as M,i as f,w as U,u as z,j as G,k as R,L as P,l as B,m as X,n as O,p as Z}from"./index-CUMlhCnO.js";import{A as Y,g as j}from"./news-DBmEFlcx.js";import{f as H}from"./format-RLyrj_9i.js";import{n as $}from"./newsCache-CZbv4D29.js";const ee={class:"beijing-time"},te={class:"time-container"},se={class:"date"},ae={class:"time"},ne=L({__name:"BeijingTime",setup(l){const e=_(""),n=_(""),a=_(""),s=()=>{const o=new Date,d=o.getFullYear(),v=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0"),u=String(o.getHours()).padStart(2,"0"),g=String(o.getMinutes()).padStart(2,"0"),p=String(o.getSeconds()).padStart(2,"0"),T=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][o.getDay()];e.value=`${u}:${g}:${p}`,n.value=`${d}-${v}-${i}`,a.value=T};return K(()=>{s();const o=setInterval(s,1e3);x(()=>{clearInterval(o)})}),(o,d)=>(r(),c("div",ee,[t("div",te,[d[0]||(d[0]=t("h3",null,"北京时间",-1)),t("div",se,h(n.value)+" "+h(a.value),1),t("div",ae,h(e.value),1)])]))}}),oe=b(ne,[["__scopeId","data-v-a6fcd6d2"]]),{base64ToBit:le,checkDate:ie}=require("./utils"),{getSolarTerm:re}=require("./solar_term"),W=[],ce="甲乙丙丁戊己庚辛壬癸",de="子丑寅卯辰巳午未申酉戌亥",ue="鼠牛虎兔龙蛇马羊猴鸡狗猪",he="正二三四五六七八九十冬腊",J="一二三四五六七八九十";function _e(){const e=le("hLaCVwUrqpNDSYNlUaqgrUE1pJXQSuak2FJoaSrqlC1QNailtBK26TcElwpLWyWDUoNqJW1ArYJVySXgkuzJYNSg6lVtSC1oFbHJuCS58loZKhqU20oLVQVqSq2BLoSWlkrCpV7SoNlBaqqrUE2gpbNSuClcVKg6VBqpq1QVaglslK4KVwUmPpMGyrrVQVqCW1UroJWhSamk0NJY1ShaoFtTS2glbBJtKS4Ul1ZLBqUG1GraBVsEq6pLwSXBks2pQdSw1lBawKtlk2hJcGSyalQ1KDaUlqoK1PVbAl0JLVyVhUqFpSWqgrVlVqCXQUtspXBSsKk0dKg1UFapJtQS2alcFJwaTL0mDVMFqja1BLbaV0ErQpNbSWGkoapLtUC1oFbSStgk29JcKSwqlW1KDaQVtGq2CTeEl4JLgyWzUoOpQaqSrYFVwSXHkuDJZ9SoalBtKq1UFagptRS6ClsVKwqVC0prVQVqgq0lLoKWwUrOpODSbuUwaqCtVU2oJbBSuik4NFo6TBqkG1TNagVtBK5KToUWhoqWyUNUg");let n={y:1900,m:1,d:31,obj:new Date(1900,0,31,0,0,0,0)},a=6,s=0;for(let o=0;o<e.length&&!(o+16>=e.length);){const d=e.substr(o,4);o+=4;const v=+`0b${d}`,i=v>0?13:12,u=e.substr(o,i).split("").map(y=>+y);o+=i,W.push({solarDate:n,leapMonth:v,months:u,heavenlyStem:a,earthlyBranch:s});const g=i*29+u.filter(y=>y==1).length,p=new Date(n.y,n.m-1,n.d+g,0,0,0,0);n={y:p.getFullYear(),m:p.getMonth()+1,d:p.getDate(),obj:p},a=(a+1)%10,s=(s+1)%12}}_e();function ve(l,e){return l.y!=e.y?l.y>e.y:l.m!=e.m?l.m>e.m:l.d!=e.d?l.d>e.d:!1}function ge(l,e,n){const a=`${n?"闰":""}${he[l-1]}月`;return e<=10?`${a}初${J[e-1]}`:e<20?`${a}十${J[e-11]}`:e==20?`${a}廿十`:e>20?`${a}廿${J[e-21]}`:`${a}三十`}function me(l,e,n){l=Math.floor(+l),e=Math.floor(+e),n=Math.floor(+n),ie(l,e,n);let a=l-1900,s=W[a];if(ve(s.solarDate,{y:l,m:e,d:n})&&(a-=1,s=W[a]),!s)throw new Error("Invalid Date");const o=new Date(l,e-1,n,0,0,0,0);let d=Math.round((o.getTime()-s.solarDate.obj.getTime())/(24*60*60*1e3)),v=!1;for(let i=0;i<s.months.length;i++){const u=s.leapMonth>0&&i==s.leapMonth;u&&(v=!0);const g=29+s.months[i];if(d<g){let p=v?i:i+1;return{lunarMonth:p,lunarDate:d+1,isLeap:u,solarTerm:re(l,e,n),lunarYear:`${ce[s.heavenlyStem]}${de[s.earthlyBranch]}年`,zodiac:`${ue[s.earthlyBranch]}`,dateStr:ge(p,d+1,u)}}else d-=g}throw new Error("There's something wrong!")}const pe={class:"lunar-card"},we={class:"header"},fe={class:"content"},ye={class:"info-group"},ke={class:"info-item"},Se={class:"info-item"},$e={class:"info-group"},Le={class:"info-item"},be={class:"info-item"},De={class:"info-group"},Ce={class:"info-item"},qe=L({__name:"Lunner",setup(l){const e=_({date:"加载中...",year:"—",solar:"—",week:"—",zodiac:"—",term:"—",festival:"—"}),n=()=>{try{const a=new Date,s=me(a.getFullYear(),a.getMonth()+1,a.getDate());e.value.solar=`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")}`,e.value.week="星期"+["日","一","二","三","四","五","六"][a.getDay()],e.value.date=s.dateStr||"—",e.value.year=s.lunarYear||"—",e.value.zodiac=s.zodiac?`${s.zodiac}生肖`:"—",e.value.term=s.solarTerm||"无节气",e.value.festival=[s.festival,s.lunarFestival].filter(Boolean).join(" / ")||"无节日"}catch(a){console.error("农历数据获取失败:",a),e.value={date:"数据错误",year:"—",solar:"—",week:"—",zodiac:"—",term:"—",festival:"—"}}};return K(()=>{n(),setInterval(n,6e4)}),(a,s)=>(r(),c("div",pe,[t("div",we,[t("h2",null,h(e.value.date),1),t("div",null,h(e.value.year),1)]),t("div",fe,[t("div",ye,[t("div",ke,[s[0]||(s[0]=t("span",null,"公历",-1)),t("strong",null,h(e.value.solar),1)]),t("div",Se,[s[1]||(s[1]=t("span",null,"星期",-1)),t("strong",null,h(e.value.week),1)])]),t("div",$e,[t("div",Le,[s[2]||(s[2]=t("span",null,"生肖",-1)),t("strong",null,h(e.value.zodiac),1)]),t("div",be,[s[3]||(s[3]=t("span",null,"节气",-1)),t("strong",null,h(e.value.term),1)])]),t("div",De,[t("div",Ce,[s[4]||(s[4]=t("span",null,"节日",-1)),t("strong",null,h(e.value.festival),1)])])])]))}}),Ne=b(qe,[["__scopeId","data-v-bc37f4b7"]]),Ue={class:"block block-hot"},Ve={key:0,class:"loading"},Be={key:1,class:"error"},Ke={key:2,class:"news-list"},Me={class:"news-title"},Te={class:"news-meta"},Fe=L({__name:"NewNews",setup(l){const e=_(!0),n=_([]),a=_(""),s=async(o=1,d=10,v=Y.PUBLISH)=>{e.value=!0,a.value="";const i=$.generateCacheKey({page:o,pageSize:d,status:v}),u=$.getCache(i);if(u){n.value=u,e.value=!1;return}try{const g=await j({page:o,pageSize:d,status:v});n.value=(g==null?void 0:g.data.content)||[],$.saveCacheData(i,n.value,72e5)}catch(g){a.value=g.message||"获取新闻列表失败，请稍后重试"}finally{e.value=!1}};return K(()=>{s()}),(o,d)=>{const v=M("router-link");return r(),c("div",Ue,[d[0]||(d[0]=t("h2",{class:"section-title"},"最新新闻",-1)),e.value?(r(),c("div",Ve,"加载中...")):E("",!0),a.value?(r(),c("div",Be,h(a.value),1)):(r(),c("div",Ke,[(r(!0),c(q,null,N(n.value,(i,u)=>(r(),c("div",{class:"news-item",key:u},[f(v,{to:`/news/${i.id}`,class:"news-link"},{default:U(()=>[t("h3",Me,h(i.title),1),t("div",Te,[t("p",null,h(z(H)(i.publishDate)),1)])]),_:2},1032,["to"])]))),128))]))])}}}),Je=b(Fe,[["__scopeId","data-v-49db2454"]]),We={key:0,class:"block block-headline"},Ee={class:"news-list"},Ie={class:"news-image-container"},Qe=["src"],xe={class:"news-content"},ze={class:"news-title"},Ye={class:"news-date"},je=L({__name:"HeadlineNews",props:{isLoading:{type:Boolean,default:!1},sliderNewsList:{type:Array,default:()=>[]}},setup(l){return(e,n)=>{const a=M("router-link");return l.isLoading?E("",!0):(r(),c("div",We,[n[0]||(n[0]=t("h2",{class:"section-title"},"头条新闻",-1)),t("div",Ee,[(r(!0),c(q,null,N(l.sliderNewsList,(s,o)=>(r(),c("div",{class:"news-item",key:o},[f(a,{to:`/news/${s.id}`,class:"news-link"},{default:U(()=>[t("div",Ie,[t("img",{src:s.headImageUrl,alt:"新闻图片",class:"news-image"},null,8,Qe)]),t("div",xe,[t("h4",ze,h(s.title),1),t("p",Ye,h(z(H)(s.publishDate)),1)])]),_:2},1032,["to"])]))),128))])]))}}}),He=b(je,[["__scopeId","data-v-6b4926b6"]]),Ae={class:"block block-category"},Ge={class:"category-grid"},Re=["src"],Pe={class:"category-name"},Xe=L({__name:"NewsCategory",props:{categories:{type:Array,default:()=>[]}},setup(l){return(e,n)=>{const a=M("router-link");return r(),c("div",Ae,[n[0]||(n[0]=t("h2",{class:"section-title"},"新闻分类",-1)),t("div",Ge,[(r(!0),c(q,null,N(l.categories,(s,o)=>(r(),c("div",{class:"category-item",key:o},[f(a,{to:s.path,class:"category-link"},{default:U(()=>[t("img",{src:s.icon,alt:"分类图标",class:"category-icon"},null,8,Re),t("h4",Pe,h(s.name),1)]),_:2},1032,["to"])]))),128))])])}}}),Oe=b(Xe,[["__scopeId","data-v-d731039b"]]),Ze={class:"home"},et={class:"main-content"},tt={class:"sidebar"},st={class:"quick-links block"},at=["onClick"],nt={class:"video-section block"},ot={class:"video-thumbnail-container"},lt=["src"],it={class:"video-title"},rt={key:0,class:"login-modal"},ct={class:"modal-content"},dt=L({__name:"Home",setup(l){const e=X(),n=_(!1),a=_("登录 / 注册"),s=_(window.innerWidth<768),o=_([{path:"/news/society",name:"十四大",icon:"src/assets/imges/14th.png"},{path:"/news/politics",name:"政治",icon:"src/assets/imges/Political.png"},{path:"/news/economy",name:"经济",icon:"src/assets/imges/Economic.png"},{path:"/news/science",name:"科技",icon:"src/assets/imges/Technology.png"},{path:"/news/society",name:"社会",icon:"src/assets/imges/social.png"}]),d=_([{id:1,path:"/src/assets/imges/01.png",thumbnail:"/src/assets/imges/01.png",title:"中国科技发展纪实"}]),v=_([]),i=_([]),u=_(!0),g=_(""),p=async(S=1,k=10,D=Y.PUBLISH)=>{u.value=!0,g.value="";const m=$.generateCacheKey({page:S,pageSize:k,status:D}),C=$.getCache(m);if(C){v.value=C.slice(0,6),i.value=C,u.value=!1;return}try{const w=await j({page:S,pageSize:k,status:D});i.value=w==null?void 0:w.data.content,v.value=w==null?void 0:w.data.content.slice(0,6),$.saveCacheData(m,w==null?void 0:w.data.content,72e5)}catch(w){g.value=w.message||"获取新闻列表失败"}finally{u.value=!1}},y=()=>{a.value=B.getUserCache()?"个人中心":"登录 / 注册",V.value[0].title=a.value,V.value=[...V.value]},T=()=>{B.getUserCache()},A=()=>{if(B.getUserCache()){s.value?e.push("/myHome"):e.push("/index");return}n.value=!0},F=()=>{n.value=!1},I=S=>{S.key==="Escape"&&n.value&&F()},V=_([{title:a.value,action:A},{path:"/aliPay",title:"开通会员"},{path:"/pay",title:"支付"},{title:"检查",action:T},{path:"/addNews",title:"添加新闻"},{path:"/about",title:"关于我们"}]),Q=()=>{s.value=window.innerWidth<768};K(()=>{window.addEventListener("keydown",I),window.addEventListener("resize",Q),p(),y(),window.scrollTo(0,0)}),x(()=>{window.removeEventListener("keydown",I),window.removeEventListener("resize",Q)}),G(()=>B.getUserCache(),()=>{y()});const{showLoginModal:ut,isLoading:ht,tip:_t}=R({showLoginModal:n,isLoading:u,tip:a});return(S,k)=>{const D=M("router-link");return r(),c("div",Ze,[t("main",et,[f(He,{isLoading:u.value,sliderNewsList:v.value},null,8,["isLoading","sliderNewsList"]),f(Oe,{categories:o.value},null,8,["categories"]),f(Je)]),t("aside",tt,[t("div",st,[k[0]||(k[0]=t("h3",{class:"section-title"},"快速入口",-1)),(r(!0),c(q,null,N(V.value,(m,C)=>(r(),c("div",{key:C},[m.path?(r(),O(D,{key:1,to:m.path,class:"link"},{default:U(()=>[Z(h(m.title),1)]),_:2},1032,["to"])):(r(),c("a",{key:0,href:"javascript:void(0)",class:"link",onClick:m.action},h(m.title),9,at))]))),128))]),f(oe),f(Ne),t("div",nt,[k[1]||(k[1]=t("h3",{class:"section-title"},"视频专区",-1)),(r(!0),c(q,null,N(d.value,m=>(r(),c("div",{class:"video-item",key:m.id},[f(D,{to:m.path,class:"video-link"},{default:U(()=>[t("div",ot,[t("img",{src:m.thumbnail,alt:"视频缩略图",class:"video-thumbnail"},null,8,lt)]),t("h4",it,h(m.title),1)]),_:2},1032,["to"])]))),128))])]),n.value?(r(),c("div",rt,[t("div",{class:"modal-overlay",onClick:F}),t("div",ct,[f(P,{onClose:F})])])):E("",!0)])}}}),wt=b(dt,[["__scopeId","data-v-51394fbd"]]);export{wt as default};
