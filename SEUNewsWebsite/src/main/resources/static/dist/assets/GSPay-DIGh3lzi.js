import{d as I,r as c,o as P,D as T,E as t,c as i,b as s,t as X,f as v,m as y,G as N,e as l,_ as f}from"./index-CUMlhCnO.js";const x={class:"payment-container"},Q={class:"payment-card"},k={class:"amount-container"},b={class:"amount"},C={class:"qrcode-container"},h=["src"],q={key:0,class:"loading-overlay"},B=I({__name:"GSPay",setup(M){const d=T(),n=y(),a=c(0),o=["src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393038306163313031343265353530323434646638336537616532373539336464__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393039653065363732376631376239653833653538356530623939663262643663__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393430366439343463363239613961613236646462666431346536346561353538__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393463666133363232343664373139323766366138356331376639383066303138__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393538663435643033326263303462316465323062633130636338643736323663__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234393763383330306161373330613538326661633666613165353162396164346463__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234396235383837643935386535366461636430346639653761653365346339306632__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234396238623034643261383266663964363433303134373765373935316235326635__I__N_6333333837666566363831363565663062613064393265313235653.png","src/assets/imges/_Q__X_3__X__T_2__T__P_26__P__I_64633238393530376135336633316662303134373336666231613338376234396563326230333031646137653263356361316533396537353934333865333936__I__N_6333333837666566363831363565663062613064393265313235653.png"],r=c(!1),u=()=>{n.go(-1)},p=()=>{r.value=!0},g=()=>{const e=sessionStorage.getItem("securityMessage");let _=parseInt(e||"0");return(isNaN(_)||_<0||_>=o.length)&&(_=0),o[_]},m=async()=>{try{(await N.post("/api/payment/complete",{amount:a.value})).data.success?(t.success("支付完成，感谢您的支持！"),n.push("/")):t.error("支付状态验证失败，请稍后重试！")}catch(e){t.error("请求出错，请稍后重试！"),console.error("支付完成请求出错:",e)}};return P(()=>{a.value=parseFloat(d.query.amount)||0,t.warning("请您核对支付金额和订单详情！")}),(e,_)=>(l(),i("div",x,[s("div",Q,[s("div",{class:"back-button",onClick:u},_[0]||(_[0]=[s("span",{class:"arrow-icon"},null,-1),s("span",{class:"back-text"},"返回",-1)])),_[4]||(_[4]=s("h1",{class:"icon"},null,-1)),s("div",k,[_[1]||(_[1]=s("span",{class:"currency"},"¥",-1)),s("span",b,X(a.value.toFixed(2)),1)]),s("div",C,[s("img",{src:g(),alt:"支付二维码",class:"qrcode-image",onLoad:p},null,40,h),r.value?v("",!0):(l(),i("div",q,_[2]||(_[2]=[s("div",{class:"loading-spinner"},null,-1)])))]),_[5]||(_[5]=s("div",{class:"instruction-container"},[s("p",{class:"instruction-text"},"请使用工商银行APP扫描二维码")],-1)),s("div",{class:"finish-button",onClick:m},_[3]||(_[3]=[s("span",{class:"back-text"},"我已完成支付",-1),s("span",{class:"next-icon"},null,-1)]))])]))}}),w=f(B,[["__scopeId","data-v-c347d759"]]);export{w as default};
