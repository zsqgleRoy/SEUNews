import{d as v,r as i,o as b,D as y,E as n,c as p,b as t,t as h,f as q,m as f,G as x,e as l,_ as k}from"./index-CUMlhCnO.js";const B={class:"payment-container"},I={class:"payment-card"},M={class:"amount-container"},C={class:"amount"},P={class:"qrcode-container"},N=["src"],R={key:0,class:"loading-overlay"},S=v({__name:"SZRMBPay",setup(w){const d=y(),c=f(),a=i(0),o=["src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png","src/assets/imges/https___qr.pbcdci.cn_002020000100000555480815933367.png"],r=i(!1),_=()=>{c.go(-1)},u=()=>{r.value=!0},g=()=>{const e=sessionStorage.getItem("securityMessage");let s=parseInt(e||"0");return(isNaN(s)||s<0||s>=o.length)&&(s=0),o[s]},m=async()=>{try{(await x.post("/api/payment/complete",{amount:a.value})).data.success?(n.success("支付完成，感谢您的支持！"),c.push("/")):n.error("支付状态验证失败，请稍后重试！")}catch(e){n.error("请求出错，请稍后重试！"),console.error("支付完成请求出错:",e)}};return b(()=>{a.value=parseFloat(d.query.amount)||0,n.warning("请您核对支付金额和订单详情！")}),(e,s)=>(l(),p("div",B,[t("div",I,[t("div",{class:"back-button",onClick:_},s[0]||(s[0]=[t("span",{class:"arrow-icon"},null,-1),t("span",{class:"back-text"},"返回",-1)])),s[4]||(s[4]=t("h1",{class:"icon"},null,-1)),t("div",M,[s[1]||(s[1]=t("span",{class:"currency"},"¥",-1)),t("span",C,h(a.value.toFixed(2)),1)]),t("div",P,[t("img",{src:g(),alt:"支付二维码",class:"qrcode-image",onLoad:u},null,40,N),r.value?q("",!0):(l(),p("div",R,s[2]||(s[2]=[t("div",{class:"loading-spinner"},null,-1)])))]),s[5]||(s[5]=t("div",{class:"instruction-container"},[t("p",{class:"instruction-text"},"请使用数字人民币APP扫描二维码")],-1)),t("div",{class:"finish-button",onClick:m},s[3]||(s[3]=[t("span",{class:"back-text"},"我已完成支付",-1),t("span",{class:"next-icon"},null,-1)]))])]))}}),L=k(S,[["__scopeId","data-v-434a68d0"]]);export{L as default};
